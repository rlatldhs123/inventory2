<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" layout:decorate="~{layouts/layout}">
  <head>
    <meta charset="UTF-8" />
    <title>재고 통계</title>
    <link rel="stylesheet" th:href="@{/css/home.css}" />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" />
    <style>
      .summary-section {
        background-color: #f8f9fa; /* Bootstrap light background */
        border-radius: 5px;
        padding: 20px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      }
      .summary-section h5 {
        color: #007bff; /* Bootstrap primary color */
      }
      .summary-item {
        font-size: 1.1em;
        margin-bottom: 10px;
      }
      .summary-item span {
        font-weight: bold;
      }
      .purchase-cost {
        color: #28a745; /* Bootstrap success color */
      }
      .supply-price {
        color: #17a2b8; /* Bootstrap info color */
      }
      .naver-price {
        color: #dc3545; /* Bootstrap danger color */
      }

      .form-container {
        max-width: 500px;
        margin: 20px auto;
        padding: 20px;
        background-color: #f8f9fa;
        border-radius: 10px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
      }
      .btn-primary {
        transition: background-color 0.3s ease, transform 0.3s ease;
      }
      .btn-primary:hover {
        background-color: #0056b3;
        transform: scale(1.05);
      }
      .form-control:hover {
      }
    </style>
  </head>
  <body>
    <div class="form-container">
      <form th:action="@{/inventory/inventory_total_list}" method="get">
        <div class="form-group">
          <label for="productCode">상품 코드</label>
          <input type="text" id="productCode" name="productCode" class="form-control" th:value="${productCode}" />
        </div>
        <div class="form-group">
          <label for="productName">상품명</label>
          <input type="text" id="productName" name="productName" class="form-control" th:value="${productName}" />
        </div>
        <button type="submit" class="btn btn-primary">검색</button>
      </form>
    </div>
    <div layout:fragment="content">
      <div class="container-fluid">
        <div class="bg-dark text-white p-5">
          <h2 class="text-center">인벤토리 리스트</h2>
        </div>
        <form th:action="@{/inventory/inventory_total_list}" method="get">
          <div class="form-group">
            <label for="productCode">상품 코드</label>
            <input type="text" id="productCode" name="productCode" class="form-control" th:value="${productCode}" />
          </div>
          <div class="form-group">
            <label for="productName">상품명</label>
            <input type="text" id="productName" name="productName" class="form-control" th:value="${productName}" />
          </div>
          <button type="submit" class="btn btn-primary">검색</button>
        </form>
        <div class="summary-section mt-4">
          <h5>총합계</h5>
          <div class="summary-item purchase-cost">매입가 총액: <span th:text="${#numbers.formatCurrency(totalPurchaseCost)}"></span></div>
          <div class="summary-item supply-price">공급가 총액: <span th:text="${#numbers.formatCurrency(totalSupplyPrice)}"></span></div>
          <div class="summary-item naver-price">네이버 가격 총액: <span th:text="${#numbers.formatCurrency(totalNaverPrice)}"></span></div>
        </div>
        <div class="table-responsive table-container mt-4">
          <table class="table table-hover table-bordered">
            <thead class="thead-dark text-nowrap">
              <tr class="text-center">
                <th scope="col">상품 코드</th>
                <th scope="col">상품명</th>
                <th scope="col">옵션</th>
                <th scope="col">대표이미지</th>
                <th scope="col">총 수량</th>
                <th scope="col">매입가</th>
                <th scope="col">매입가 총액</th>
                <th scope="col">공급가</th>
                <th scope="col">공급가 총액</th>
                <th scope="col">배송비</th>
                <th scope="col">네이버 가격(판매가)</th>
                <th scope="col">네이버 가격 총액</th>
                <th scope="col">관세</th>
                <th scope="col">운임</th>
              </tr>
            </thead>
            <tbody class="text-nowrap" th:each="item : ${inventoryList}">
              <tr class="text-center">
                <td th:text="${item.productCode}"></td>
                <td th:text="${item.productName}"></td>
                <td th:text="${item.opt}"></td>
                <td><img th:src="@{${item.mainImage}}" alt="대표 이미지" width="50" /></td>
                <td th:text="${item.totalQuantity}"></td>
                <td th:text="${#numbers.formatCurrency(item.purchaseCost)}"></td>
                <td th:text="${#numbers.formatCurrency(item.purchaseCost * item.totalQuantity)}"></td>
                <td th:text="${#numbers.formatCurrency(item.supplyPrice)}"></td>
                <td th:text="${#numbers.formatCurrency(item.supplyPrice * item.totalQuantity)}"></td>
                <td th:text="${#numbers.formatCurrency(item.deliveryPrice)}"></td>
                <td th:text="${#numbers.formatCurrency(item.naverPrice)}"></td>
                <td th:text="${#numbers.formatCurrency(item.naverPrice * item.totalQuantity)}"></td>
                <td th:text="${#numbers.formatCurrency(item.duty)}"></td>
                <td th:text="${#numbers.formatCurrency(item.shippingCost)}"></td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>

    <th:block layout:fragment="js">
      <script th:src="@{/js/home.js}"></script>
    </th:block>
  </body>
</html>
